function xhrSuccess(){this.callback.apply(this,this.arguments)}function xhrError(){console.error(this.statusText)}function loadFile(e,t){var n=new XMLHttpRequest;n.callback=t,n.arguments=Array.prototype.slice.call(arguments,2),n.onload=xhrSuccess,n.onerror=xhrError,n.open("get",e,!0),n.responseType="arraybuffer",n.send(null)}function decodeSucc(e){this.callback.apply(this.this.arguments)}function decodeErr(){console.error(this.statusText)}function bufferSound(e){console.log(" load sounds ");audiocntxt.decodeAudioData(this.response,function(e){if(e.duration>3&&e.duration<3.1)var t="thruster";if(e.duration>9.1&&e.duration<9.15)var t="droneExpl";if(e.duration>14.1&&e.duration<14.15)var t="pdown";if(e.duration>81.86&&e.duration<81.88)var t="droneAudio";sourceObj[t].buffer=e,sourceObj[t].connect(audiocntxt.destination),sourcenum2+=1,4===sourcenum2&&console.log("load all sounds")})}function loadmobstyle(){var e=navigator.userAgent;(e.match(/Android/i)||e.match(/webOS/i)||e.match(/iPhone/i)||e.match(/iPad/i)||e.match(/iPod/i)||e.match(/BlackBerry/i)||e.match(/Windows Phone/i))&&(568!=window.innerWidth&&320!=window.innerWidth||(document.getElementById("mobilecss").href="style/i5.css"),667!=window.innerWidth&&375!=window.innerWidth||(document.getElementById("mobilecss").href="style/i6.css"),1024!=window.innerWidth&&768!=window.innerWidth||(document.getElementById("mobilecss").href="style/ipad.css"))}function initgame(e){var t=navigator.userAgent.match("Chrome");audiocntxt=t?new AudioContext:new webkitAudioContext,masterGain=audiocntxt.createGain(),masterGain.connect(audiocntxt.destination),sourceObj.droneExpl=audiocntxt.createBufferSource(),sourceObj.droneAudio=audiocntxt.createBufferSource(),sourceObj.pdown=audiocntxt.createBufferSource(),sourceObj.thruster=audiocntxt.createBufferSource(),loadFile("audio/droneExpl.wav",bufferSound,"loaded droneExpl\n\n"),loadFile("audio/droneAudio.mp3",bufferSound,"loaded droneAudio\n\n"),loadFile("audio/pdown.mp3",bufferSound,"loaded pdown\n\n"),loadFile("audio/thrusters.wav",bufferSound,"loaded thrusters\n\n");var n;n=e.target.id.match("loadMultiGame")?1:0,runGame(n)}function setsettings(e){for(var t=e.target.id,n=document.getElementsByClassName("list-group"),a=t.substring(t.length,t.length-1),s=n[a].children.length;s--;)n[a].children[s].style.backgroundColor="";t.match("0")&&glowBadge.el&&(glowBadge.el.className="badge badge-default"),"shoot00"==t&&(e.target.style.backgroundColor="#007acc",clearInterval(glowBadge.badgeInterval),glowBadge.setBadge(document.getElementById("sbut"))),"fthrust10"==t&&(e.target.style.backgroundColor="#007acc",clearInterval(glowBadge.badgeInterval),glowBadge.setBadge(document.getElementById("fbut"))),"rthrust20"==t&&(e.target.style.backgroundColor="#007acc",clearInterval(glowBadge.badgeInterval),glowBadge.setBadge(document.getElementById("rbut"))),"pinside31"==t&&(e.target.style.backgroundColor="#007acc",document.getElementById("ibut").className="badge badge-color",document.getElementById("obut").className="badge badge-default",settingsarr[3]=1),"poutside31"==t&&(e.target.style.backgroundColor="#007acc",document.getElementById("obut").className="badge badge-color",document.getElementById("ibut").className="badge badge-default",settingsarr[3]=0),"sfxon42"==t&&(e.target.style.backgroundColor="#007acc",document.getElementById("sfxonbut").className="badge badge-color",document.getElementById("sfxoffbut").className="badge badge-default",settingsarr[4]=1),"sfxoff42"==t&&(e.target.style.backgroundColor="#007acc",document.getElementById("sfxoffbut").className="badge badge-color",document.getElementById("sfxonbut").className="badge badge-default",settingsarr[4]=0),"slin53"==t&&(e.target.style.backgroundColor="#007acc",document.getElementById("slinbut").className="badge badge-color",document.getElementById("sloutbut").className="badge badge-default",settingsarr[5]=1),"slout53"==t&&(e.target.style.backgroundColor="#007acc",document.getElementById("sloutbut").className="badge badge-color",document.getElementById("slinbut").className="badge badge-default",settingsarr[5]=0)}function signup_in(){var e=document.getElementById("usrname").value,t=document.getElementById("psswrd").value,n=document.getElementById("emailinput").value,a=document.getElementById("loginbutton"),s=0;if("login"==a.innerHTML&&e&&t&&(s=1),"create"==a.innerHTML&&e&&t&&n&&(s=1),s){var d=new XMLHttpRequest;d.onreadystatechange=function(){if(4==this.readyState&&200==this.status)if(this.responseText.match("{")){var e=JSON.parse(this.responseText);loadUser(e)}else document.getElementById("valmess").innerHTML=this.responseText},d.open("POST",url,!0),d.setRequestHeader("Content-type","application/x-www-form-urlencoded"),d.send("username="+e+"&password="+t+"&email="+n+"&settings="+settingsarr)}}function loadUser(e,t){document.getElementById("navusr").innerHTML="Welcome "+e.username+" |";var n="";settingsarr=e.settings.split(",").map(function(e){return~~e}),document.getElementById("inoutss").style.display="none",document.getElementById("usercont").style.display="none",document.getElementById("sndfxbutrow").style.display="none";for(var a=0;a<3;a++){if(n="",0==a)var s=document.getElementById("sbut");if(1==a)var s=document.getElementById("fbut");if(2==a)var s=document.getElementById("rbut");32==settingsarr[a]&&(n="spc"),37==settingsarr[a]&&(n="left"),38==settingsarr[a]&&(n="up"),39==settingsarr[a]&&(n="right"),40==settingsarr[a]&&(n="down"),n?s.innerHTML=n:s.innerHTML=String.fromCharCode(settingsarr[a]).toLowerCase()}settingsarr[3]&&(document.getElementById("pinside31").style.backgroundColor="#007acc",document.getElementById("ibut").className="badge badge-color"),settingsarr[3]||(document.getElementById("poutside31").style.backgroundColor="#007acc",document.getElementById("obut").className="badge badge-color"),settingsarr[4]&&(document.getElementById("sfxon42").style.backgroundColor="#007acc",document.getElementById("sfxonbut").className="badge badge-color"),settingsarr[4]||(document.getElementById("sfxoff42").style.backgroundColor="#007acc",document.getElementById("sfxoffbut").className="badge badge-color"),settingsarr[5]&&(document.getElementById("slin53").style.backgroundColor="#007acc",document.getElementById("slinbut").className="badge badge-color"),settingsarr[5]||(document.getElementById("slout53").style.backgroundColor="#007acc",document.getElementById("sloutbut").className="badge badge-color"),currply={id:e.id,username:e.username,password:e.password},updatePages.navFunc({target:{id:"snav"}}),t&&updatePages.navFunc({target:{id:"dwnav"}})}function updateSettings(){var e=new XMLHttpRequest;e.onreadystatechange=function(){if(4==this.readyState&&200==this.status)if(4==this.readyState&&200==this.status)if(this.responseText.match("{")){var e=JSON.parse(this.responseText);settingsarr=e.settings.split(",").map(function(e){return~~e})}else document.getElementById("valmess").innerHTML=this.responsetext;else document.getElementById("valmess").innerHTML="Sorry this was a problem, please try again."},e.open("POST",url,!0),e.setRequestHeader("Content-type","application/x-www-form-urlencoded"),e.send("id="+currply.id+"&settings="+settingsarr)}function setSoundFx(e){var t=e.currentTarget;"on"==t.value?(t.value="off",t.style.background="#000000",settingsarr[4]=0):(t.value="on",t.style.background="",settingsarr[4]=1)}function runGame(e){for(var t=document.getElementsByName("radio_3698130"),n=0,a=t.length;n<a;n++)if(t[n].checked){document.getElementById("insideship").value=t[n].value;break}document.body.className+=" custom-background-image";var s=document.getElementById("page");s.style.display="none";var d=document.getElementById("game-content");d.style.display="block";var o=document.createElement("script");o.type="text/javascript",o.src="js_min/require.js",e?o.setAttribute("data-main","js_min/configmulti.js"):o.setAttribute("data-main","js_min/config.js"),window.screen.height<768&&(document.getElementById("arrowmarginup").className+=" fa-1",document.getElementById("arrowmargindown").className+=" fa-1");var l=document.getElementsByTagName("head")[0];l.appendChild(o)}function updateNav(e){var t=document.getElementById("site-header-menu"),n=e.target.className;n.match("toggled-on")&&(e.target.className="menu-toggle",t.className="site-header-menu "),n.match("toggled-on")||(e.target.className="menu-toggle toggled-on",t.className="site-header-menu toggled-on")}function loginAni(){var e=(document.getElementById(".emailinput"),document.getElementById("message")),t=document.getElementById("loginbutton");emailinput.className.match("showemail")?(emailinput.className="hideemail",e.innerHTML='Not registered? <a href="#">Create an account</a>',t.innerHTML="login"):(emailinput.className="hideemail showemail",e.innerHTML='Already registered? <a href="#">Sign In</a>',t.innerHTML="create")}function changeInOut(e){settingsarr[3]=e}var url="http://www.dronewar1.com",settingsarr=[32,38,40,0,1,0],currply={username:0,password:""},audiocntxt,masterGain,sourceObj={},sourcenum2=0;loadmobstyle();var updatePages=function(){var e={pagetc:"dronewar1",classtc:"dwli"},t=function(e,t,n,a){var e=document.getElementById(e);e.style.display="none",document.getElementById(t).className="";var n=document.getElementById(n);n.style.display="block",document.getElementById(a).className="current-menu-item"};return{navFunc:function(n){var a=n.target,s="block";if(a.id.match("dwnav")&&(t(e.pagetc,e.classtc,"dronewar1","dwli"),s="block",e={pagetc:"dronewar1",classtc:"dwli"}),a.id.match("wanav")&&(t(e.pagetc,e.classtc,"web_app","wali"),s="block",e={pagetc:"web_app",classtc:"wali"}),a.id.match("lnav")&&(t("login-page",e.classtc,"login-page","slli"),e={pagetc:"login-page",classtc:"slli"}),a.id.match("snav")){document.getElementById("lnav").style.display="none",document.getElementById("snav").style.display="block",t(e.pagetc,e.classtc,"settings","slli");var d=document.getElementById("pagetitle").innerHTML;"Drone War 1"==d&&t("dronewar1","dwli","settings","slli"),"Web App"==d&&t("web_app","wali","settings","slli"),s="none",window.addEventListener("keydown",glowBadge.updateBadge,!1),e={pagetc:"settings",classtc:"slli"}}"titleLink"!=a.id&&"bannerImg"!=a.id||(t(e.pagetc,e.classtc,"dronewar1","dwli"),s="block",e={pagetc:"dronewar1",classtc:"dwli"});document.getElementById("post-187").style.display=s,document.getElementById("comments").style.display=s}}}();document.getElementById("loadGame").addEventListener("click",initgame),document.getElementById("loadMultiGame").addEventListener("click",initgame),document.getElementById("startGame").addEventListener("click",initgame),document.getElementById("sndfxbutton").addEventListener("click",setSoundFx),document.getElementById("dwnav").addEventListener("click",updatePages.navFunc),document.getElementById("wanav").addEventListener("click",updatePages.navFunc),document.getElementById("lnav").addEventListener("click",updatePages.navFunc),document.getElementById("snav").addEventListener("click",updatePages.navFunc),document.getElementById("titleLink").addEventListener("click",updatePages.navFunc),document.getElementById("bannerLink").addEventListener("click",updatePages.navFunc),document.getElementById("menu-toggle").addEventListener("click",updateNav),document.getElementById("message").addEventListener("click",loginAni),document.getElementById("loginbutton").addEventListener("click",signup_in),document.getElementById("shoot00").addEventListener("click",setsettings),document.getElementById("fthrust10").addEventListener("click",setsettings),document.getElementById("rthrust20").addEventListener("click",setsettings),document.getElementById("pinside31").addEventListener("click",setsettings),document.getElementById("poutside31").addEventListener("click",setsettings),document.getElementById("sfxon42").addEventListener("click",setsettings),document.getElementById("sfxoff42").addEventListener("click",setsettings),document.getElementById("slin53").addEventListener("click",setsettings),document.getElementById("slout53").addEventListener("click",setsettings),document.getElementById("udset").addEventListener("click",updateSettings);var glowBadge=function(){var e=1;return{setBadge:function(t){this.el=t,self=this,this.badgeInterval=setInterval(function(){e?(self.el.className="badge badge-color",e=0):(self.el.className="badge badge-default",e=1)},250)},updateBadge:function(e){e.preventDefault();var t=0;if(settingsarr.indexOf(e.keyCode)===-1){32==e.keyCode&&(t="spc"),37==e.keyCode&&(t="left"),38==e.keyCode&&(t="up"),39==e.keyCode&&(t="right"),40==e.keyCode&&(t="down"),t?self.el.innerHTML=t:self.el.innerHTML=e.key;var n=self.el.parentElement.id.substring(self.el.parentElement.id.length-2,self.el.parentElement.id.length-1);settingsarr[n]=e.keyCode}console.log(settingsarr)}}}();document.getElementById("commentsubmit").addEventListener("submit",function(e){e.preventDefault(),document.getElementById("commentsubmit").disabled=!0;var t=document.getElementById("commentname").value,n=document.getElementById("textarea_1").value,a=new XMLHttpRequest;a.onreadystatechange=function(){4==this.readyState&&200==this.status&&console.log(this.responseText)},a.open("POST",url,!0),a.setRequestHeader("Content-type","application/x-www-form-urlencoded"),a.send("name="+t+"&comment="+n);var s=document.getElementById("comnum1").cloneNode(!0);s.id="new_item",s.getElementsByClassName("fn")[0].innerHTML=t;var d=["January","February","March","April","May","June","July","August","September","October","November","December"],o=new Date,l=o.getDate(),r=o.getMonth(),c=o.getFullYear(),i=d[r];i+=1==l?" 1st, ":2==l?" 2nd, ":3==l?" 3rd, ":31==l?" 31st, ":" "+l+"th, ",i+=""+c,s.getElementsByTagName("time")[0].innerHTML=i,s.getElementsByTagName("p")[0].innerHTML=n,document.getElementsByClassName("comment-list")[0].appendChild(s)}),function(){var e=document.getElementById("consoleData");e=JSON.parse(e.value);for(var t=0;t<e.length;t++){var n=e[t];console.log("%c"+n,"background: #222; color: #bada55")}var a=document.getElementById("userdata").value;"0"!==a&&loadUser(JSON.parse(a),1)}();