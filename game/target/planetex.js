define(["three","lib/improvedNoise"],function(e,r){return function(){var t,n,i,o,s,a=new r,c=function(r){t=new e.DodecahedronGeometry(r,0);for(var n=0;n<t.vertices.length;n++){var i=a.noise(t.vertices[n].x,t.vertices[n].y,t.vertices[n].z);t.vertices[n].x+=5*i,t.vertices[n].y+=5*i,t.vertices[n].z+=5*i}return t.verticesNeedUpdate=!0,t};return{initMat:function(r){o=new e.MeshPhongMaterial({reflectivity:1}),o.emissiveIntensity=10,n=c(5*Math.random()),i=c(40)},create:function(r,t){for(var a=new e.Group,t=t||20,c=1;t--;){var v=o.clone(),d=new e.Color;1==c&&(d.r=.168,d.g=.156,d.b=0),2==c&&(d.r=1,d.g=0,d.b=0),3==c&&(d.r=.733,d.g=.164,d.b=.164),4==c&&(d.r=.921,d.g=.949,d.b=.094),5==c&&(d.r=.988,d.g=.874,d.b=.411,c=0),c++,v.color.set(d),v.emissive.set(d),s=r?new e.Mesh(i,v):new e.Mesh(n,v);var h=e.Math.randInt(1,10),u=e.Math.randInt(1,10),f=e.Math.randInt(1,10);s.position.set(h,u,f),a.add(s)}return a}}}});